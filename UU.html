<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¸ è¯—æ„æ—¶å…‰ | æ»‘åŠ¨æ¢ç´¢</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
    <style>
        body {
            font-family: "å®‹ä½“", "KaiTi", serif;
            background: url('https://source.unsplash.com/1600x900/?nature,soft,light') no-repeat center center fixed;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
            overflow: hidden;
            transition: background 1.5s ease-in-out;
        }

        .hidden {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 1.2s ease-in-out, transform 0.8s ease-in-out;
        }

        button {
            padding: 12px 28px;
            font-size: 18px;
            font-family: "KaiTi", serif;
            color: #6b705c;
            background: #f5f5f5;
            border: 1px solid #c8c8c8;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
        }

        button:hover {
            background: #ececec;
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        #swipeHint {
            font-size: 18px;
            font-family: "KaiTi", serif;
            color: rgba(60, 60, 60, 0.8);
            background: rgba(255, 255, 255, 0.6);
            padding: 10px 16px;
            border-radius: 8px;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            text-align: center;
            width: auto;
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* ç²’å­èƒŒæ™¯ */
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* éŸ³ä¹æ’­æ”¾æŒ‰é’® */
        #musicControl {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            padding: 10px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            transition: background 0.3s;
        }

        #musicControl:hover {
            background: rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body>
    <!-- ç²’å­ç‰¹æ•ˆèƒŒæ™¯ -->
    <div id="particles-js"></div>

    <!-- æŒ‰é’® -->
    <button id="startButton" onclick="startExperience()">ğŸŒ¿ è½»è½»ä¸€ç‚¹ï¼Œè¯—æ„ç»½æ”¾ ğŸŒ¿</button>
    
    <!-- æ»‘åŠ¨æç¤º -->
    <div id="swipeHint">ğŸ‘‰ å·¦å³æ»‘åŠ¨ï¼Œå‘ç°æ›´å¤šè¯—æ„ ğŸŒ¸</div>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <div id="musicControl" onclick="toggleMusic()">ğŸµ</div>
    
    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgMusic" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-relaxing.mp3" type="audio/mp3">
    </audio>

    <script>
        let backgrounds = [
            { url: "https://source.unsplash.com/1600x900/?sunset,soft,flowers", text: "ğŸŒ¸ ä½ æ˜¯æ—¶å…‰é‡Œæœ€æ¸©æŸ”çš„è¯—ã€‚" },
            { url: "https://source.unsplash.com/1600x900/?lake,quiet,serene", text: "â˜€ï¸ é£ä¼šå¹æ•£äº‘æœµï¼Œä½†å¸¦ä¸èµ°ä½ çš„æ¸©æŸ”ã€‚" },
            { url: "https://source.unsplash.com/1600x900/?forest,morning,mist", text: "ğŸŒ¿ ä¸€èŠ±ä¸€ä¸–ç•Œï¼Œä¸€å¶ä¸€è©æã€‚" },
            { url: "https://source.unsplash.com/1600x900/?ocean,waves,calm", text: "ğŸŒŠ ç”Ÿæ´»å¦‚æ°´ï¼Œæ¸©æŸ”è€Œåšå®šã€‚" }
        ];
        let currentIndex = 0;

        function startExperience() {
            // æŒ‰é’®æ¶ˆå¤±
            document.getElementById("startButton").classList.add("hidden");

            // æ˜¾ç¤ºæ»‘åŠ¨æç¤º
            document.getElementById("swipeHint").style.opacity = "1";

            // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
            document.getElementById("bgMusic").play();

            // è·å–åœ¨çº¿è¯—æ­Œ
            fetchPoetry();
        }

        function fetchPoetry() {
            fetch("https://v1.jinrishici.com/all.json") // å¼€æºè¯—æ­Œ API
                .then(response => response.json())
                .then(data => {
                    Swal.fire({
                        title: "ğŸŒ¸ è¯—æ„æ—¶å…‰",
                        text: `${data.content} â€”â€” ${data.author}ã€Š${data.origin}ã€‹`,
                        confirmButtonText: "ğŸŒ¿ ç»§ç»­æ²‰æµ¸",
                        background: "rgba(255, 255, 255, 0.85)",
                        customClass: {
                            popup: "rounded-lg",
                            title: "text-lg text-gray-700",
                            content: "text-md text-gray-600"
                        }
                    });
                })
                .catch(error => {
                    console.error("è·å–è¯—å¥å¤±è´¥", error);
                });
        }

        function toggleMusic() {
            const music = document.getElementById("bgMusic");
            if (music.paused) {
                music.play();
                document.getElementById("musicControl").innerText = "ğŸ”Š";
            } else {
                music.pause();
                document.getElementById("musicControl").innerText = "ğŸµ";
            }
        }

        // ç›‘å¬æ»‘åŠ¨äº‹ä»¶
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener("touchstart", (event) => {
            touchStartX = event.touches[0].clientX;
        });

        document.addEventListener("touchend", (event) => {
            touchEndX = event.changedTouches[0].clientX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                nextBackground();
            } else if (touchEndX > touchStartX + 50) {
                prevBackground();
            }
        }

        function nextBackground() {
            currentIndex = (currentIndex + 1) % backgrounds.length;
            updateBackground();
        }

        function prevBackground() {
            currentIndex = (currentIndex - 1 + backgrounds.length) % backgrounds.length;
            updateBackground();
        }

        function updateBackground() {
            document.body.style.backgroundImage = `url('${backgrounds[currentIndex].url}')`;
            document.getElementById("swipeHint").innerText = backgrounds[currentIndex].text;
        }
    </script>
</body>
</html>
